# 基本戦術
* 7つのメッセージを利用する
* za

<hr>

#### 9つのメッセージを利用する

| メッセージ名|送信側から |受信側から|
| -- | -- |
| KeepAlive | 通信可能かチェック |得になし|
| Choke | アップロード不許可 |ダウンロード不許可|
| Unchoke | アップロード許可 |ダウンロード許可|
| Interest | ダウンロード許可要求 |アップロード許可要求|
| NotInterest | ダウンード許可不要 |アップロード許可不要|
| Request | ダウンロード要求 |アップロード要求|
| Piece | データアップロード |データダウンロード|
| Bitfield | 所持しているBlockを知らせる| |
| Have | 所持しているBlockを知らせる ||

これらのメッセージをやりとりして、データの配信とダウンロードを行います。
ネットワーク全体に効率良くデーターが配信されると同時に、すばやく、データをダウンロードできる環境が望ましいです。

ダウンロードする側としては、Unchokeメッセージを送信してもらいたい。配信する側としては、限られた数のPeer以外はUnchokeメッセージを送信したくない。といった感じでしょうか。


#### Choke を利用してアップロード数を制限

Choke機能を利用してアップロードを制限しましょう。アップロードする側の戦略としては、なるたけ、回線速度の良いPeerへたくさんデータを配信することです。

太い回線のPeerが配信に参加した方が、効率良くデータ配布できますから、合理的な判断です。

##### 最適な選択を探求する。

もっとも太い回線をもっているPeerと通信し続けるのが良いでしょう。
しかし、もっとも太い回線を持っているPeerを知らないわけですから、
良い選択をしているか判断できません。

そこで、回線の太いPeerへのアップロードをしつつ、回線の太いPeerを探す事を行います。

例えば、
1. 5個のUnchoke中のPeerの中で、もっとも回線が細いPeerには、Chokeメッセージを送信する
2. Choke中のPeerからランダムにひとつのPeerを選択して、Unchokeメッセージを送信する。
3. これを、30ごとに繰り返す。

この方法をとる事で、他にも良い効果があります。
* 回線の細いPeerへもデータを配布できる。
* 回線

以上で終了ですが、最適な選択を選ぶ方法としては、「A/Bテスト」、「バンディットアルゴリズム」とかでググってみてください。


